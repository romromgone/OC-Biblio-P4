CREATE TABLE usager (
	mail 	        varchar(50) PRIMARY KEY,	
	mdp 	        varchar(56) NOT NULL,
  nomuser       varchar(30) NOT NULL,
  prenomuser    varchar(20) NOT NULL,
  telephone     varchar(10) NOT NULL
);

CREATE TABLE ouvrage (
	idouvrage       serial PRIMARY KEY,
	titre           varchar(100) NOT NULL,
	auteur          varchar(50) NOT NULL,
	anneeparution   varchar(4) NOT NULL,
	classification	varchar(3) NOT NULL,
	resume          text
);

CREATE TABLE edition (
	isbn            varchar(13) PRIMARY KEY,
	editeur         varchar(30) NOT NULL,
	anneeedition    varchar(4) NOT NULL,
	format   	      varchar(10) NOT NULL,
	idouvrage       integer NOT NULL REFERENCES ouvrage (idouvrage)
);

CREATE TABLE exemplaire (
	idexemplaire 	serial PRIMARY KEY,
	isbn       	  varchar(13) NOT NULL REFERENCES edition (isbn)
);

CREATE TABLE emprunt (
	datedeb         date NOT NULL,
	datefin         date NOT NULL,
	prolonge	      boolean NOT NULL,
	rendu		        boolean NOT NULL,
	mail	          varchar(50) NOT NULL REFERENCES usager (mail),
	idexemplaire    integer NOT NULL REFERENCES exemplaire (idexemplaire),
	PRIMARY KEY (mail, idexemplaire, datedeb)
);